# 1.20 meeting minute

1. cnc不用指针，直接cnc.open()调用
2. startReference：先Driving_ref——>position reached。（如果非isRefDone，则startReference：一个弹窗是否要做Reference。）
3. xraycontrol：输入电压电流后需要用户回车确认后才修改
4. Thread：CNC,XRAY共用一个线程OR分别各一个线程，调研一下。
5. CNC,XRAY及后续所有组件都放在**一个handler**中，不分开。（可能崩溃源头）尝试只用一个线程。

6. 对应dispid要修改



# 1.22 meeting minute

1. webview 的idl搞一下，看能不能解决前后端参数传递问题。

   <img src="C:\Users\fuyuk\Downloads\image (15).png" alt="image (15)" style="zoom: 67%;" />

2. 线程：一个线程同时监控xray,cnc的状态status（暂定100ms/次）React webworker。别的不需要线程

3. cnc永远需要实时监控当前position位置（100ms/次调用getposition），joystick，doorstatus

4. startReference调用后会自动更新position。（dummy暂时无效）

   

## 2.11 meeting minute

1.坐标移动添加实时进度显示（线程，信号+槽）

2.线程需要每间隔200ms获取一次

3.detector先做live图获取

4.webview研究是否有其他前端往后端传参的方式，比如move axis后端设置数组接受（）一次只传1个参数，后端接收到参数后再取用

5.Invoke参数传递试用全部用put property传递。

6.后端先设计线程每200ms获取一次数据传递给前端显示。 



```meimaid
flowchart LR
 subgraph OldUI["Old System UI"]
        O1["Fixed Layout"]
        O2["Fixed Control Panels"]
        O3["Traditional Windows Style"]
        O4["Deep Menu Hierarchy"]
        O5["Fixed Toolbars"]
  end
 subgraph NewUI["New System UI"]
        N1["Responsive Layout"]
        N2["Draggable Floating Panels"]
        N3["Modern Design Language"]
        N4["Flat Navigation Structure"]
        N5["Context-Aware Toolbars"]
  end
 subgraph Advantages["Key Advantages"]
        A1["Improved Space Utilization"]
        A2["Workflow Flexibility"]
        A3["Intuitive & Aesthetic Design"]
        A4["Reduced Click Count"]
        A5["Focus on Content"]
  end
    OldUI --> NewUI
    NewUI --> Advantages
     O1:::old
     O2:::old
     O3:::old
     O4:::old
     O5:::old
     N1:::new
     N2:::new
     N3:::new
     N4:::new
     N5:::new
     A1:::adv
     A2:::adv
     A3:::adv
     A4:::adv
     A5:::adv
     OldUI:::old
     NewUI:::new
     Advantages:::adv
    classDef old fill:#f8d7da,stroke:#dc3545,color:#842029
    classDef new fill:#d1e7dd,stroke:#198754,color:#0f5132
    classDef adv fill:#cfe2ff,stroke:#084298,color:#084298

```



## 2.13 meeting minute

1. Detector 注意事项：先设置好buffer再通知后端获取buffer中图

```cpp
   
//buffer类型：unsigned short *
g_pDigGrabber->DefineDestBuffer(pwDestBuf, 1, g_nImgSizeY, g_nImgSizeX);

//采图之前规定通信机制
g_pDigGrabber->SetCallbacksAndMessages(m_pMainWnd->m_hWnd,
                      0 /*WM_ACQ_ERROR*/, 0 /*WM_ACQ_LOOSINGFRAMES*/,
                      CXtsView::EndFrameCallback, NULL);
//自定义函数，通知后端采detector的图
void CALLBACK CXtsView::EndFrameCallback(CDigGrabber &DigGrabber) 

 
```

2. 线程锁考虑删除





## 2.17 meeting minute

2.20汇报注意tips:

- UI对比之前xact有什么更出彩的地方
- 多画些流程图之类

